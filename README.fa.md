# پکت (Paqet) — تانل KCP

تانل شبکه مبتنی بر KCP با رمزنگاری AES روی پکت‌های خام TCP

## نصب سریع

### سرور (خارج)

```bash
curl -fsSL https://raw.githubusercontent.com/changecoin938/Tunnel/main/install.sh | sudo bash -s server
```

بعد از نصب، دستور کلاینت آماده نمایش داده می‌شود.

### کلاینت (ایران)

دستوری که سرور نمایش می‌دهد را کپی و اجرا کنید:

```bash
curl -fsSL https://raw.githubusercontent.com/changecoin938/Tunnel/main/install.sh | sudo bash -s client SERVER_IP KEY
```

## نگاشت پورت‌ها

| کلاینت (ایران) | سرور (خارج) |
|---|---|
| 0.0.0.0:443 | 127.0.0.1:2443 |
| 0.0.0.0:8080 | 127.0.0.1:2444 |
| 0.0.0.0:8880 | 127.0.0.1:2445 |
| 0.0.0.0:2053 | 127.0.0.1:2446 |
| 0.0.0.0:2083 | 127.0.0.1:2447 |
| 0.0.0.0:2087 | 127.0.0.1:2448 |
| 0.0.0.0:2096 | 127.0.0.1:2449 |

## معماری

```text
کاربر --> Xray (gRPC+Reality) --> کلاینت پکت (:443,...) --> KCP --> سرور پکت --> Xray (127.0.0.1:2443,...) --> اینترنت
```

## دستورات مفید

```bash
# وضعیت سرویس
systemctl status paqet

# ری‌استارت
systemctl restart paqet

# لاگ زنده
journalctl -u paqet -f

# تست اتصال
paqet ping -c /etc/paqet/config.yaml
```

## نصب مجدد / آپدیت

همان دستور نصب را دوباره اجرا کنید. اسکریپت:
- سرویس قبلی را متوقف می‌کند
- کانفیگ قبلی را بک‌آپ می‌گیرد
- کلید رمزنگاری قبلی را نگه می‌دارد (سرور)
- باینری جدید را دانلود می‌کند
