# High-throughput Fast3 profile (server role)
# Tune this file for gRPC-heavy tunnel workloads.
role: "server"

log:
  level: "warn"

debug:
  pprof: "127.0.0.1:6060"
  diag: true

listen:
  addr: ":9999"

network:
  interface: "eth0"
  dscp: 0
  ipv4:
    addr: "10.0.0.100:9999"
    router_mac: "aa:bb:cc:dd:ee:ff"
  pcap:
    sockbuf: 67108864
    snaplen: 65535
    promisc: false
    immediate: false
    timeout_ms: 5

transport:
  protocol: "kcp"
  conn: 4
  kcp:
    mode: "fast3"
    mtu: 1350
    rcvwnd: 16384
    sndwnd: 16384
    block: "aes-128-gcm"
    key: "your-secret-key-here"
    guard: true
    guard_magic: "PQT1"
    guard_window: 30
    guard_skew: 1
    header_timeout: 10

    # Server-side limits (recommended for this profile)
    max_sessions: 2048
    max_streams_total: 65536
    max_streams_per_session: 4096

    # Multiplexing buffers
    smuxbuf: 8388608
    streambuf: 262144
